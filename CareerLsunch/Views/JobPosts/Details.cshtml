@model CareerLaunch.Models.JobPost

@{
    ViewData["Title"] = "Job Details";
}

<section class="section-hero overlay inner-page bg-image" style="background-image: url('@Url.Content("~/images/hero_1.jpg")');" id="home-section">
    <div class="container">
        <div class="row">
            <div class="col-md-7">
                <h1 class="text-white font-weight-bold">@Model.Title</h1>
                <div class="custom-breadcrumbs">
                    <a href="@Url.Action("Index", "Home")">Home</a> <span class="mx-2 slash">/</span>
                    <a href="@Url.Action("Index", "Job")">Job</a> <span class="mx-2 slash">/</span>
                    <span class="text-white"><strong>@Model.Title</strong></span>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="site-section" id="job-details-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="job-details">
                    <h1 class="job-title font-weight-bold" style="font-size: 2rem;">@Model.Title</h1>
                    <h4 class="company-name text-primary mt-2">@Model.CompanyName</h4>
                    <p class="location mt-3"><strong>📍 Location:</strong> @Model.Location</p>
                    <p class="job-type"><strong>🕒 Job Type:</strong> @Model.JobType</p>
                    <p class="post-date"><strong>📅 Posted On:</strong> @Model.PostDate.ToString("MMMM dd, yyyy")</p>

                    <h2 class="font-weight-bold mt-5" style="font-size: 1.75rem;">Job Description</h2>
                    <p>@Model.Description</p>

                    @if (TempData["Message"] != null)
                    {
                        var messageType = TempData["MessageType"]?.ToString();
                        var message = TempData["Message"]?.ToString();
                        <script>
                            $(document).ready(function() {
                                Swal.fire({
                                    title: messageType === 'success' ? 'Success' : 'Error',
                                    text: '@message',
                                    icon: messageType === 'success' ? 'success' : 'error',
                                    confirmButtonText: 'OK'
                                });
                            });
                        </script>
                    }

                    <div class="mt-4">
                        <form asp-action="ApplyForJob" asp-controller="Application" method="post" enctype="multipart/form-data">
                            <input type="hidden" name="jobId" value="@Model.JobPostId" />

                            <div class="form-group">
                                <label for="coverLetter">Cover Letter</label>
                                <textarea class="form-control" id="coverLetter" name="coverLetter" rows="4"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="resumeFile">Upload Your Resume</label>
                                <input type="file" class="form-control" id="resumeFile" name="resumeFile" />
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg">
                                Apply Now
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 text-center">
                <div class="company-logo">
                    <img src="@Model.UploadedFilePath" alt="@Model.CompanyName Logo"
                         class="img-fluid rounded job-details-logo"
                         style="border-radius: 10px;">
                </div>
            </div>
        </div>
    </div>
</section>
